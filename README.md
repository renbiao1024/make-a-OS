# 30天自制操作系统

## CPU

- 只能处理 0 1 两个电信号
- 高级语言——汇编语言——机器语言，——执行
- 四位二进制构成一位十六进制
- cpu访问内存的速度要比访问寄存器慢很多
- `0xf0000`附近存放着BIOS程序，用户不能使用
- `0x00007c00-0x00007dff`启动区内容装载地址

## 汇编

- `;`：注释
- `DB`：写字符串
- `DW`：define world
- `DD`：define double world，4字节，32位
- `$`：1.输出之前字节数。2.将要读入的内存地址。
- `RESB	0x1fe-$`：填写0x00直到0x001fe
- `ORG`：指明程序的装载地址
- `JMP`：跳转
- `entry`：标签的声明，用于指定`JMP`的目的地
- `MOV`：复制赋值
- `[]`：表示内存地址  `MOV AL,[SI]`表示把SI地址的一字节内容读到AL中
- `ADD`：加法
- `CMP`：判断是否相等
- `JE`：条件跳转，如果比较结果相等跳转

~~~ARM
CMP AL,0
JE fin	;如果AL==0，跳转到fin
~~~

- `INT`：中断跳转
- `HLT`：让CPU停止动作，进入待机状态，等待外部发生变化CPU被唤醒。可用于防止CPU空转

## 启动区

- 软盘第一个扇区称为启动区，如果最后两个字节不是`0x55 AA`计算机会认为这张盘没有所需的启动程序
- 计算机以512个字节位一个单位进行读写，称为一个扇区
- 由于操作系统往往很大，在启动区只放一个IPL（启动程序加载器）

## 寄存器

- `AX`：累加寄存器`AH AL`
- `CX`：计数寄存器`CH CL`
- `DX`：数据寄存器`DH DL`
- `BX`：基址寄存器`BH BL`
- `SP`：栈指针寄存器
- `BP`：基址指针寄存器
- `SI`：源变址寄存器
- `DI`：目的变址寄存器
- 在这些16位寄存器前加E，就成了32位寄存器的表示

- 段寄存器
  - `ES`：附加段寄存器
  - `CS`：代码段寄存器
  - `SS`：栈段寄存器
  - `DS`：数据段寄存器
  - `FS  GS`：没有名称
# -30-
# make-a-OS
